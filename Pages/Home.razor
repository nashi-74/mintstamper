@page "/"
@using System.Text.RegularExpressions
@inject ICensorService censorService
@inject IStampParserService stampParserService

<PageTitle>Mintstamper</PageTitle>

<StampInput @bind-ChildData=inputText @bind-ChildData:after=ProcessTextInput />
<HighlightedStampOutput Stamps=stamps />

@code {
    private string inputText { get; set; } = string.Empty;
    private List<Stamp> stamps { get; set; } = [];

    private List<string> replacements = new List<string>
        {
            //things that might get filtered, most are from this list: https://docs.google.com/spreadsheets/d/1ozg1Cnm6SdtM4M5rATkANAi07xAzYWaKL7HKxyvoHzk
            #region profanities
            "9-11",
            "9/11",
            "8chan",
            "abortion",
            "abortions",
            "aids",
            "anal",
            "anus",
            "arse",
            "ass",
            "asshole",
            "assholes",
            "balls",
            "balling",
            "bdsm",
            "bitch",
            "bitchass",
            "bitches",
            "bitching",
            "bitchy",
            "blacks",
            "blow job",
            "blowjob",
            "blowjobs",
            "bondage",
            "boner",
            "boob",
            "boobies",
            "boobs",
            "breasts",
            "bukkake",
            "bullshit",
            "butthole",
            "cameltoe",
            "cannabis",
            "cleavage",
            "clusterfuck",
            "cocaine",
            "cock",
            "condom",
            "condoms",
            "coronavirus",
            "cum",
            "cumming",
            "cums",
            "cunt",
            "cunts",
            "dick",
            "dickhead",
            "dildo",
            "dildos",
            "doggie style",
            "doggiestyle",
            "doggy style",
            "doggystyle",
            "drug",
            "ecchi",
            "erection",
            "fuck",
            "fucks",
            "fucker",
            "fuckers",
            "fucking",
            "fucks",
            "fucked",
            "fetish",
            "gangbang",
            "gang bang",
            "gangbangs",
            "genitals",
            "grope",
            "groped",
            "gropes",
            "groping",
            "hentai",
            "hitler",
            "hooker",
            "hookers",
            "horny",
            "incest",
            "jav",
            "jerk off",
            "jerkoff",
            "loli",
            "lolicon",
            "marijuana",
            "masturbate",
            "masturbating",
            "masturbation",
            "mating",
            "motherfucker",
            "motherfuckers",
            "motherfucking",
            "nazi",
            "nipple",
            "nipples",
            "nude",
            "nudes",
            "nudity",
            "orgasm",
            "orgasms",
            "orgies",
            "orgy",
            "pegging",
            "penis",
            "porn",
            "pornhub",
            "porno",
            "pussies",
            "pussy",
            "racist",
            "red",
            "rimming",
            "rule 34",
            "semen",
            "sex",
            "sexist",
            "sexier",
            "sexiest",
            "sexy",
            "shibari",
            "shit",
            "shithead",
            "shitpost",
            "shits",
            "shitting",
            "slave",
            "slut",
            "sluts",
            "slutty",
            "squirt",
            "squirting",
            "terrorism",
            "terrorist",
            "terrorists",
            "tits",
            "tittie",
            "titties",
            "titty",
            "twerk",
            "twerking",
            "twerks",
            "vagina",
            "vore",
            "vored",
            "weed",
            "whore",
            "whores",
            "xxx"
            #endregion
        };

    private void ProcessTextInput()
    {
        inputText = inputText.Replace(":memboo", ":_"); //emotes
        inputText = inputText.Replace("#", "# "); //hashtags

        inputText = Regex.Replace(inputText, @"w{3,}", "ww"); //wwwwwws
        inputText = Regex.Replace(inputText, @"W{3,}", "WW"); //WWWWWWs

        //profanity filter,
        //passing in list as reference because I don't want that list to appear in my pushed / removed lines of code lol
        inputText = censorService.CensorText(inputText, replacements);

        //separating out HBDs, highlighting control lines and notes
        stamps = stampParserService.ParseStamps(inputText);
    }
}